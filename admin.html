<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HyperBuy - Qu·∫£n tr·ªã</title>

    <!-- CSS chung -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Font Awesome (icon sidebar) -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
          integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX5pBnMFcV7oQPJkl9QevSCWr3W6A=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>

    <style>
        /* CSS c≈© c·ªßa admin.html gi·ªØ nguy√™n, ch·ªâ ch·ªânh nh·∫π cho g·ªçn */

        .admin-section {
            background-color: var(--light-gray-background);
            padding: 25px;
            margin-bottom: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            border: 1px solid var(--border-color);
            display: none;
        }
        .admin-section.active {
            display: block;
        }

        /* Thanh menu con trong sidebar */
        #admin-sub-nav {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            list-style: none;
            padding: 0;
        }
        #admin-sub-nav li {
            display: inline-block;
            margin: 0 5px;
        }
        #admin-sub-nav .admin-nav-link.active {
            background-color: var(--primary-color);
            color: #fff;
            font-weight: bold;
        }

        .admin-subsection {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px dashed #ccc;
        }
        .admin-subsection:first-of-type {
            margin-top: 0;
            padding-top: 0;
            border-top: none;
        }

        h3 {
            margin-top: 1.5em;
            margin-bottom: 0.8em;
        }

        .table-responsive {
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 10px 12px;
            border: 1px solid #ddd;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .action-buttons button {
            margin-right: 5px;
        }
    </style>
</head>
<body>
<div class="admin-layout">
    <!-- üß≠ Sidebar -->
    <aside id="admin-sidebar">
        <div class="sidebar-header">
            <h2>‚ö° HyperBuy</h2>
            <button id="toggle-darkmode" title="Chuy·ªÉn giao di·ªán">üåô</button>
        </div>

        <ul id="admin-sub-nav" class="sidebar-nav">
            <li>
                <a href="#user-management"
                   class="admin-nav-link active"
                   data-section-id="user-management">
                    <i class="fas fa-users"></i> Ng∆∞·ªùi d√πng
                </a>
            </li>
            <li>
                <a href="#category-management"
                   class="admin-nav-link"
                   data-section-id="category-management">
                    <i class="fas fa-list"></i> Danh m·ª•c
                </a>
            </li>
            <li>
                <a href="#notification-management"
                   class="admin-nav-link"
                   data-section-id="notification-management">
                    <i class="fas fa-bell"></i> Th√¥ng b√°o
                </a>
            </li>
            <li>
                <a href="#voucher-management"
                   class="admin-nav-link"
                   data-section-id="voucher-management">
                    <i class="fas fa-ticket-alt"></i> Voucher
                </a>
            </li> 
    <!-- ‚úÖ NEW: Qu·∫£n l√Ω ƒë∆°n h√†ng -->
    <li>
        <a href="#order-management"
           class="admin-nav-link"
           data-section-id="order-management">
            <i class="fas fa-receipt"></i> ƒê∆°n h√†ng
        </a>
    </li>
            <!-- üö´ T√†i kho·∫£n b·ªã c·∫•m -->
            <li>
                <a href="#admin-banned-users-section"
                   class="admin-nav-link"
                   data-section-id="admin-banned-users-section">
                    üö´ T√†i kho·∫£n b·ªã c·∫•m
                </a>
            </li>
        </ul>

        <div class="sidebar-home">
            <a href="index.html" class="btn-home">
                <i class="fas fa-home"></i><span>Trang ch·ªß</span>
            </a>
        </div>
        <div class="sidebar-footer">
            <button id="admin-logout-btn" class="btn btn-danger">
                <i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t
            </button>
        </div>
    </aside>

    <!-- üß± Main content -->
    <main class="admin-main">
        <header class="admin-header">
            <h1>B·∫£ng ƒëi·ªÅu khi·ªÉn Qu·∫£n tr·ªã</h1>
            <button id="sidebar-toggle" class="btn btn-secondary">
                <i class="fas fa-bars"></i>
            </button>
        </header>

        <!-- üë§ Qu·∫£n l√Ω ng∆∞·ªùi d√πng -->
        <section class="admin-section active" id="user-management">
            <h2>Qu·∫£n l√Ω Ng∆∞·ªùi d√πng</h2>

            <div class="admin-subsection">
                <h3>
                    Y√™u c·∫ßu tr·ªü th√†nh Ng∆∞·ªùi b√°n
                    (<span id="seller-request-count">0</span>)
                </h3>
                <div class="table-responsive">
                    <table id="seller-requests-table">
                        <thead>
                        <tr>
                            <th>ID Y√™u c·∫ßu</th>
                            <th>T√™n User</th>
                            <th>T√™n C·ª≠a H√†ng</th>
                            <th>H√†nh ƒë·ªông</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td colspan="4" style="text-align:center;">ƒêang t·∫£i...</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="admin-subsection">
                <h3>
                    Danh s√°ch Ng∆∞·ªùi d√πng
                    (<span id="all-user-count">0</span>)
                </h3>
                <div class="table-responsive">
                    <table id="all-users-table">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>T√™n</th>
                            <th>Email</th>
                            <th>Vai tr√≤</th>
                            <th>H√†nh ƒë·ªông</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td colspan="5" style="text-align:center;">ƒêang t·∫£i...</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- üè∑Ô∏è Qu·∫£n l√Ω danh m·ª•c -->
        <section class="admin-section" id="category-management">
            <h2>Qu·∫£n l√Ω Danh m·ª•c</h2>

            <button id="show-add-category-form" class="btn btn-primary">
                + Th√™m Danh m·ª•c
            </button>

            <div id="add-edit-category-form" style="display:none;">
                <h3 id="category-form-title">Th√™m Danh m·ª•c M·ªõi</h3>
                <input type="hidden" id="category-id" />

                <div class="form-group">
                    <label for="category-name">T√™n Danh m·ª•c:</label>
                    <input type="text" id="category-name" required />
                </div>

                <div class="form-group">
                    <label for="category-description">M√¥ t·∫£:</label>
                    <textarea id="category-description"></textarea>
                </div>

                <button id="save-category-button" class="btn btn-success">L∆∞u</button>
                <button id="cancel-category-button" class="btn btn-secondary">H·ªßy</button>

                <p id="category-message"></p>
            </div>

            <div class="table-responsive">
                <table id="categories-table">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>T√™n</th>
                        <th>M√¥ t·∫£</th>
                        <th>H√†nh ƒë·ªông</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td colspan="4" style="text-align:center;">ƒêang t·∫£i...</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- üîî G·ª≠i th√¥ng b√°o -->
        <section class="admin-section" id="notification-management">
            <h2>G·ª≠i Th√¥ng b√°o</h2>

            <form id="adminSendNotificationForm">
                <div class="form-group">
                    <label>User ID (ƒë·ªÉ tr·ªëng n·∫øu g·ª≠i cho t·∫•t c·∫£):</label>
                    <input type="text"
                           id="admin-user-id"
                           name="userId"
                           placeholder="Nh·∫≠p User ID ho·∫∑c ƒë·ªÉ tr·ªëng" />
                </div>

                <div class="form-group">
                    <label>N·ªôi dung th√¥ng b√°o:</label>
                    <textarea id="admin-message"
                              name="message"
                              required></textarea>
                </div>

                <button type="submit" class="btn btn-info">
                    G·ª≠i Th√¥ng b√°o
                </button>
            </form>

            <p id="send-notification-admin-success-message"
               class="success-message" style="display:none;"></p>
            <p id="send-notification-admin-error-message"
               class="error-message" style="display:none;"></p>
        </section>

        <!-- üéüÔ∏è Qu·∫£n l√Ω voucher -->
        <section class="admin-section" id="voucher-management">
            <h2>üéüÔ∏è Qu·∫£n l√Ω Voucher</h2>

            <form id="createVoucherForm" class="form-container">
                <div class="form-row">
                    <div class="form-group form-group-half">
                        <label>M√£ Voucher:</label>
                        <input name="code" required />
                    </div>
                    <div class="form-group form-group-half">
                        <label>Gi√° tr·ªã gi·∫£m:</label>
                        <input name="discountValue" type="number" step="0.01" required />
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group form-group-half">
                        <label>Lo·∫°i gi·∫£m:</label>
                        <select name="discountType">
                            <option value="PERCENT">%</option>
                            <option value="AMOUNT">‚Ç´</option>
                        </select>
                    </div>
                    <div class="form-group form-group-half">
                        <label>S·ªë l∆∞·ª£ng:</label>
                        <input name="quantity" type="number" min="1" value="1" />
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group form-group-half">
                        <label>B·∫Øt ƒë·∫ßu:</label>
                        <input name="startDate" type="datetime-local" required />
                    </div>
                    <div class="form-group form-group-half">
                        <label>K·∫øt th√∫c:</label>
                        <input name="endDate" type="datetime-local" required />
                    </div>
                </div>

                <div class="form-group">
                    <label>Tr·∫°ng th√°i:</label>
                    <select name="status">
                        <option value="ACTIVE">ACTIVE</option>
                        <option value="INACTIVE">INACTIVE</option>
                    </select>
                </div>

                <button type="submit" class="btn btn-primary">T·∫°o Voucher</button>
                <p id="voucher-success-message" class="success-message"></p>
                <p id="voucher-error-message" class="error-message"></p>
            </form>

            <hr />

            <form id="issueVoucherForm" class="form-container">
                <div class="form-row">
                    <div class="form-group form-group-half">
                        <label>User ID / Seller ID:</label>
                        <input name="userId" placeholder="Nh·∫≠p ID ng∆∞·ªùi nh·∫≠n..." required />
                    </div>
                    <div class="form-group form-group-half">
                        <label>M√£ Voucher:</label>
                        <input name="voucherCode" placeholder="Nh·∫≠p m√£ voucher..." required />
                    </div>
                </div>

                <button type="submit" class="btn btn-success">G·ª≠i Voucher</button>
                <p id="issue-success-message" class="success-message"></p>
                <p id="issue-error-message" class="error-message"></p>
            </form>
        </section>
<section id="order-management" class="admin-section d-none">
    <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0">Qu·∫£n l√Ω ƒê∆°n h√†ng</h5>
            <span>
                T·ªïng s·ªë ƒë∆°n h√†ng:
                <strong id="admin-order-count">0</strong>
            </span>
        </div>

        <div class="card-body">
            <!-- √î t√¨m ki·∫øm theo username -->
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="admin-order-search-input" class="form-label">
                        T√¨m ƒë∆°n h√†ng theo username
                    </label>
                    <div class="input-group">
                        <input
                            type="text"
                            id="admin-order-search-input"
                            class="form-control"
                            placeholder="V√≠ d·ª•: bao1, user001 ..."
                        />
                        <button class="btn btn-primary" id="admin-order-search-btn">
                            T√¨m ƒë∆°n
                        </button>
                    </div>
                </div>
            </div>

            <!-- H·ªôp l·ªói -->
            <div id="admin-orders-error" class="alert alert-danger d-none"></div>

            <!-- B·∫£ng ƒë∆°n h√†ng -->
            <div class="table-responsive">
                <table class="table table-striped" id="admin-orders-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Ng∆∞·ªùi d√πng</th>
                            <th>T·ªïng ti·ªÅn</th>
                            <th>Tr·∫°ng th√°i</th>
                            <th>Ng√†y t·∫°o</th>
                            <th>H√†nh ƒë·ªông</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c admin.js ƒë·ªï v√†o -->
                        <tr>
                            <td colspan="6">H√£y nh·∫≠p username v√† b·∫•m "T√¨m ƒë∆°n".</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>

        <!-- üö´ T√†i kho·∫£n b·ªã c·∫•m -->
        <section class="admin-section" id="admin-banned-users-section">
            <h2>üö´ T√†i kho·∫£n b·ªã c·∫•m</h2>

            <p>
                T·ªïng s·ªë t√†i kho·∫£n b·ªã c·∫•m:
                <strong id="banned-user-count">0</strong>
            </p>

            <div class="table-responsive">
                <table id="banned-users-table">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>T√™n ƒëƒÉng nh·∫≠p</th>
                        <th>Email</th>
                        <th>H√†nh ƒë·ªông</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td colspan="4" style="text-align:center;">ƒêang t·∫£i...</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </main>
</div>

<script src="https://kit.fontawesome.com/a076d05399.js"></script>
<script src="js/main.js"></script>
<script src="js/admin.js"></script>

<script>
    // üåô Dark mode toggle
    document.body.style.transition = "background 0.3s, color 0.3s";
    document.addEventListener("DOMContentLoaded", () => {
        const body = document.body;
        const toggleBtn = document.getElementById("toggle-darkmode");
        const isDark = localStorage.getItem("darkMode") === "true";

        if (isDark) body.classList.add("dark-mode");
        toggleBtn.textContent = isDark ? "‚òÄÔ∏è" : "üåô";

        toggleBtn.addEventListener("click", () => {
            body.classList.toggle("dark-mode");
            const active = body.classList.contains("dark-mode");
            localStorage.setItem("darkMode", active);
            toggleBtn.textContent = active ? "‚òÄÔ∏è" : "üåô";
        });
    });
</script>
</body>
</html>
